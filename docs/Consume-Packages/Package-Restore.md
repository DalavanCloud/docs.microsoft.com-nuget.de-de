---
title: NuGet-Paketwiederherstellung | Microsoft-Dokumentation
author: kraigb
ms.author: kraigb
manager: ghogen
ms.date: 10/24/2017
ms.topic: article
ms.prod: nuget
ms.technology: 
ms.assetid: a7bf21da-86ae-4c2d-8750-04ff53f41967
description: "Beschreibung der Wiederherstellung von Paketen mit NuGet, von denen ein Projekt abhängig ist, die auch die Deaktivierung von Wiederherstellungsversionen sowie von eingeschränkten Versionen umfasst."
keywords: "NuGet-Paketwiederherstellung, NuGet-Paketinstallation, Installieren eines Pakets, Wiederherstellen von Paketen, Abhängigkeitsversionen, Deaktivieren von automatischen Wiederherstellungen, einschränkende Paketversionen"
ms.reviewer:
- karann-msft
- unniravindranathan
ms.openlocfilehash: 4e819a2bb34bbe70f0f11d5adeed82b976a8cb65
ms.sourcegitcommit: a40c1c1cc05a46410f317a72f695ad1d80f39fa2
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/05/2018
---
# <a name="package-restore"></a><span data-ttu-id="d7994-104">Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-104">Package Restore</span></span>

<span data-ttu-id="d7994-105">Die NuGet-**Paketwiederherstellung** installiert vor dem Erstellen eines Projekts alle Pakete, auf die verwiesen wird, um eine übersichtlichere Entwicklungsumgebung zu unterstützen und die Größe des Repositorys zu reduzieren.</span><span class="sxs-lookup"><span data-stu-id="d7994-105">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all referenced packages before a project is built.</span></span> <span data-ttu-id="d7994-106">Dieses häufig verwendete Feature stellt sicher, dass alle Abhängigkeiten in einem Projekt verfügbar sind. Dabei ist es nicht erforderlich, dass diese Pakete in der Quellcodeverwaltung gespeichert werden (Informationen zur Konfiguration ihres Repositorys zum Ausschließen von Paketbinärdateien finden Sie unter [Packages and Source Control (Pakete und Quellcodeverwaltung)](../consume-packages/packages-and-source-control.md)).</span><span class="sxs-lookup"><span data-stu-id="d7994-106">This widely-used feature ensures that all dependencies are available in a project without requiring those packages to be stored in source control (see [Packages and Source Control](../consume-packages/packages-and-source-control.md) on how to configure your repository to exclude package binaries).</span></span>

<span data-ttu-id="d7994-107">In diesem Thema:</span><span class="sxs-lookup"><span data-stu-id="d7994-107">In this topic:</span></span>
- [<span data-ttu-id="d7994-108">Kurzanleitung zur Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-108">Quick guide to package restore</span></span>](#quick-guide-to-package-restore)
- [<span data-ttu-id="d7994-109">Übersicht zur Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-109">Package restore overview</span></span>](#package-restore-overview)
- [<span data-ttu-id="d7994-110">Aktivieren und Deaktivieren der Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-110">Enabling and disabling package restore</span></span>](#enabling-and-disabling-package-restore)
- [<span data-ttu-id="d7994-111">Einschränken der Paketversionen mit der Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-111">Constraining package versions with restore</span></span>](#constraining-package-versions-with-restore)
- <span data-ttu-id="d7994-112">[Befehlszeilenwiederherstellungen](#command-line-restore) für sämtliche NuGet-Versionen</span><span class="sxs-lookup"><span data-stu-id="d7994-112">[Command-line restore](#command-line-restore), for all versions of NuGet</span></span>
- <span data-ttu-id="d7994-113">[Automatische Wiederherstellung in Visual Studio](#automatic-restore-in-visual-studio) für NuGet 2.7 und höher</span><span class="sxs-lookup"><span data-stu-id="d7994-113">[Automatic restore in Visual Studio](#automatic-restore-in-visual-studio), for NuGet 2.7 and later.</span></span>
- <span data-ttu-id="d7994-114">[Wiederherstellung mit MSBuild-Integration in Visual Studio](#msbuild-integrated-restore) für NuGet 2.6 und früher</span><span class="sxs-lookup"><span data-stu-id="d7994-114">[MSBuild-integrated restore in Visual Studio](#msbuild-integrated-restore), for NuGet 2.6 and earlier.</span></span>
- [<span data-ttu-id="d7994-115">Paketwiederherstellung mit Team Foundation Build</span><span class="sxs-lookup"><span data-stu-id="d7994-115">Package restore with Team Foundation Build</span></span>](#package-restore-with-team-foundation-build)

<span data-ttu-id="d7994-116">Der Wiederherstellungsverhalten unterscheidet sich von Version zu Version. Führen Sie `nuget.exe` in der Befehlszeile aus, um zu überprüfen, über welche NuGet-Version Sie verfügen, und sehen Sie sich die erste ausgegebene Zeile an.</span><span class="sxs-lookup"><span data-stu-id="d7994-116">Restore behavior does vary by version; to check your NuGet version, simply run `nuget.exe` on the command line and look at the first line of output.</span></span>

<span data-ttu-id="d7994-117">Weitere Details zur Paketwiederherstellung auf Buildservern finden Sie unter [Package restore with TFBuild (Paketwiederherstellung mit TFBuild)](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="d7994-117">For additional details on package restore on build servers, see [Package restore with TFBuild](../consume-packages/team-foundation-build.md).</span></span>

> [!Note]
> <span data-ttu-id="d7994-118">Projekte, die für die Paketwiederherstellung konfiguriert sind, funktionieren auch mit xbuild auf Mono.</span><span class="sxs-lookup"><span data-stu-id="d7994-118">Projects configured for package restore also work with xbuild on Mono.</span></span>

## <a name="quick-guide-to-package-restore"></a><span data-ttu-id="d7994-119">Kurzanleitung zur Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-119">Quick guide to package restore</span></span>

[!INCLUDE[package-restore](../includes/package-restore.md)]

> [!Note]
> <span data-ttu-id="d7994-120">Wenn die Fehlermeldungen „Dieses Projekt verweist auf mindestens ein NuGet-Paket, das auf diesem Computer fehlt.“ oder „One or more NuGet packages need to be restored but couldn't be because consent has not been granted.“ („Mindestens ein NuGet-Paket muss wiederhergestellt werden, dies wurde allerdings aufgrund der fehlenden Zustimmung verhindert.“) angezeigt werden, aktivieren Sie die automatische Wiederherstellung, indem Sie die Anweisungen unter [Aktivieren und Deaktivieren der Paketwiederherstellung](#enabling-and-disabling-package-restore) ausführen.</span><span class="sxs-lookup"><span data-stu-id="d7994-120">If you see the error "This project references NuGet package(s) that are missing on this computer" or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," turn on automatic restore by following the instructions under [Enabling and disabling package restore](#enabling-and-disabling-package-restore).</span></span>

## <a name="package-restore-overview"></a><span data-ttu-id="d7994-121">Übersicht zur Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-121">Package restore overview</span></span>

<span data-ttu-id="d7994-122">Zunächst werden Paketverweise in einem der folgenden Formate zur Paketverwaltung verwaltet, die abhängig von dem Projekttypen und der NuGet-Version sind.</span><span class="sxs-lookup"><span data-stu-id="d7994-122">First, package references are maintained in one of the following package management formats, depending on project type and NuGet version.</span></span> <span data-ttu-id="d7994-123">(Beachten Sie, dass NuGet 4 und MSBuild 15.1 in Visual Studio 2017 installiert sind.)</span><span class="sxs-lookup"><span data-stu-id="d7994-123">(Note that NuGet 4 and MSBuild 15.1 are installed with Visual Studio 2017.)</span></span>

| <span data-ttu-id="d7994-124">Methode</span><span class="sxs-lookup"><span data-stu-id="d7994-124">Method</span></span> | <span data-ttu-id="d7994-125">NuGet-Version</span><span class="sxs-lookup"><span data-stu-id="d7994-125">NuGet Version</span></span> | <span data-ttu-id="d7994-126">description</span><span class="sxs-lookup"><span data-stu-id="d7994-126">Description</span></span> | 
| --- | --- | --- |
| `packages.config` | <span data-ttu-id="d7994-127">2.x und höher</span><span class="sxs-lookup"><span data-stu-id="d7994-127">2.x+</span></span> | <span data-ttu-id="d7994-128">Führt alle Abhängigkeiten auf.</span><span class="sxs-lookup"><span data-stu-id="d7994-128">Lists the complete deep set of dependencies.</span></span> <span data-ttu-id="d7994-129">Zu `packages.config` hinzugefügte Pakete sowie Ziele und Eigenschaften müssen der Projektdatei hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="d7994-129">Packages added to `packages.config` must also be added to the project file, and Targets and Props must also be added to the project file.</span></span> <span data-ttu-id="d7994-130">Dabei handelt es sich um die Baselinemethode für alle NuGet-Versionen, deren Leistung allerdings im Vergleich zu anderen Optionen geringer ist.</span><span class="sxs-lookup"><span data-stu-id="d7994-130">This is the baseline method for all versions of NuGet, but has slower performance compared with the other options.</span></span> <span data-ttu-id="d7994-131">(Informationen dazu finden Sie unter [packages.config-Schema](../schema/packages-config.md).)</span><span class="sxs-lookup"><span data-stu-id="d7994-131">(See [packages.config schema](../schema/packages-config.md).)</span></span> | 
| `project.json` | <span data-ttu-id="d7994-132">3.x und höher</span><span class="sxs-lookup"><span data-stu-id="d7994-132">3.x+</span></span> | <span data-ttu-id="d7994-133">Standardmäßig nur bei UWP-Projekten verwendet, aber Projekte können aus `packages.config` konvertiert werden.</span><span class="sxs-lookup"><span data-stu-id="d7994-133">Used only by default with UWP projects, but projects can be converted from `packages.config`.</span></span> <span data-ttu-id="d7994-134">`project.json` führt nur die Abhängigkeiten auf oberster Ebene.</span><span class="sxs-lookup"><span data-stu-id="d7994-134">`project.json` lists only top-level dependencies.</span></span> <span data-ttu-id="d7994-135">Verweise, Ziele und Eigenschaften werden während des Buildvorgangs dynamisch dem Projekt hinzugefügt, was im Vergleich zu `packages.config` die Leistung verbessert.</span><span class="sxs-lookup"><span data-stu-id="d7994-135">References, Targets, and Props are added dynamically to the project during build, resulting in better performance compared with `packages.config`.</span></span> <span data-ttu-id="d7994-136">(Informationen dazu finden Sie unter [project.json-Schema](../schema/project-json.md).)</span><span class="sxs-lookup"><span data-stu-id="d7994-136">(See [project.json schema](../schema/project-json.md).)</span></span>|
| <span data-ttu-id="d7994-137">PackageReference</span><span class="sxs-lookup"><span data-stu-id="d7994-137">PackageReference</span></span> | <span data-ttu-id="d7994-138">4.x und höher</span><span class="sxs-lookup"><span data-stu-id="d7994-138">4.x+</span></span> | <span data-ttu-id="d7994-139">Führt neben `<Reference>` und `<ProjectReference>` Abhängigkeiten direkt in der Projektdatei auf dem `<PackageReference>`-Knoten auf.</span><span class="sxs-lookup"><span data-stu-id="d7994-139">Lists dependencies directly in the project file in the `<PackageReference>` node, alongside `<Reference>` and `<ProjectReference>`.</span></span> <span data-ttu-id="d7994-140">Ähnliche Funktionsweise wie `project.json`. Informationen dazu finden Sie unter [Package references in project files (Paketverweise in Projektdateien)](../Consume-Packages/Package-References-in-Project-Files.md).</span><span class="sxs-lookup"><span data-stu-id="d7994-140">Works similarly to `project.json`; see [Package references in project files](../Consume-Packages/Package-References-in-Project-Files.md).</span></span> |

<span data-ttu-id="d7994-141">Beginnen Sie als Nächstes mit einer Wiederherstellung mithilfe der Verweisliste. Dafür gibt es verschiedene Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="d7994-141">Second, you start a restore using the reference list in a variety of ways:</span></span>

<span data-ttu-id="d7994-142">Über die Befehlszeile oder die [Package Manager Console (Paket-Manager-Konsole)](../tools/Package-Manager-Console.md):</span><span class="sxs-lookup"><span data-stu-id="d7994-142">From the command line or [Package Manager Console](../tools/Package-Manager-Console.md):</span></span>

| <span data-ttu-id="d7994-143">Befehl</span><span class="sxs-lookup"><span data-stu-id="d7994-143">Command</span></span> | <span data-ttu-id="d7994-144">Anwendbare Szenarios</span><span class="sxs-lookup"><span data-stu-id="d7994-144">Applicable scenarios</span></span> |
| --- | --- | 
| `nuget restore` | <span data-ttu-id="d7994-145">Alle NuGet-Versionen und Verweistypen.</span><span class="sxs-lookup"><span data-stu-id="d7994-145">All versions of NuGet and all reference types.</span></span> <span data-ttu-id="d7994-146">Informationen dazu finden Sie im Abschnitt [Befehlszeilenwiederherstellungen](#command-line-restore).</span><span class="sxs-lookup"><span data-stu-id="d7994-146">See [Command-line restore](#command-line-restore) below.</span></span> | 
| `dotnet restore` | <span data-ttu-id="d7994-147">Entspricht `nuget restore` für .NET Core-Projekte.</span><span class="sxs-lookup"><span data-stu-id="d7994-147">Same as `nuget restore` for .NET Core projects.</span></span> <span data-ttu-id="d7994-148">Informationen dazu finden Sie unter [dotnet restore](/dotnet/articles/core/tools/dotnet-restore).</span><span class="sxs-lookup"><span data-stu-id="d7994-148">See [dotnet restore](/dotnet/articles/core/tools/dotnet-restore).</span></span> |
| `msbuild /t:restore` | <span data-ttu-id="d7994-149">Nur NuGet 4.x und höher sowie MSBuild 15.1 und höher mit [Paketverweisen in Projektdateien](../Consume-Packages/Package-References-in-Project-Files.md).</span><span class="sxs-lookup"><span data-stu-id="d7994-149">Nuget 4.x+ and MSBuild 15.1+ with [package references in project files](../Consume-Packages/Package-References-in-Project-Files.md) only.</span></span> <span data-ttu-id="d7994-150">Sowohl `nuget restore` als auch `dotnet restore` verwenden diesen Befehl für anwendbare Projekte.</span><span class="sxs-lookup"><span data-stu-id="d7994-150">`nuget restore` and `dotnet restore` both use this command for applicable projects.</span></span> <span data-ttu-id="d7994-151">Informationen dazu finden Sie unter [NuGet pack and restore as MSBuild targets – restore target (Packen und Wiederherstellen von NuGet als MSBuild-Ziele: Wiederherstellungsziel)](../schema/msbuild-targets.md#restore-target).</span><span class="sxs-lookup"><span data-stu-id="d7994-151">See [NuGet pack and restore as MSBuild targets- restore target](../schema/msbuild-targets.md#restore-target).</span></span>|

<span data-ttu-id="d7994-152">Visual Studio stellt Pakete ebenfalls zu verschiedenen Zeiten wieder her:</span><span class="sxs-lookup"><span data-stu-id="d7994-152">Visual Studio itself also restores packages at different times:</span></span>

| <span data-ttu-id="d7994-153">Typ</span><span class="sxs-lookup"><span data-stu-id="d7994-153">Type</span></span> | <span data-ttu-id="d7994-154">Wenn es zu einer Wiederherstellung kommt</span><span class="sxs-lookup"><span data-stu-id="d7994-154">When restore happens</span></span> |
| --- | --- |
| <span data-ttu-id="d7994-155">Wiederherstellungsvorlage</span><span class="sxs-lookup"><span data-stu-id="d7994-155">Template restore</span></span> | <span data-ttu-id="d7994-156">Bei der Erstellung eines neuen Projekts, da einige Vorlagen von externen Paketen abhängig sind</span><span class="sxs-lookup"><span data-stu-id="d7994-156">During creation of a new project, as some templates depend on external packages.</span></span> |
| <span data-ttu-id="d7994-157">Wiederherstellung des Builds</span><span class="sxs-lookup"><span data-stu-id="d7994-157">Build restore</span></span> | <span data-ttu-id="d7994-158">Erster Schritt eines Builds</span><span class="sxs-lookup"><span data-stu-id="d7994-158">As the first step of a build.</span></span> |
| <span data-ttu-id="d7994-159">Wiederherstellen einer Projektmappe</span><span class="sxs-lookup"><span data-stu-id="d7994-159">Solution restore</span></span> | <span data-ttu-id="d7994-160">Wenn der Benutzer mit der rechten Maustaste auf eine Projektmappe klickt, und **NuGet-Pakete wiederherstellen** auswählt.</span><span class="sxs-lookup"><span data-stu-id="d7994-160">When user right-clicks a solution and selects **Restore NuGet Packages**.</span></span> |
| <span data-ttu-id="d7994-161">Wiederherstellen bei Projektänderungen</span><span class="sxs-lookup"><span data-stu-id="d7994-161">Restore on project change</span></span> | <span data-ttu-id="d7994-162">*(Nur NuGet 4.x)* Wenn ein SDK-basiertes .NET Core-Projekt verwendet wird und bei der Änderung des Projektstatus.</span><span class="sxs-lookup"><span data-stu-id="d7994-162">*(NuGet 4.x only)* When a .NET Core SDK-based project is used, including when project state changes.</span></span> |

## <a name="enabling-and-disabling-package-restore"></a><span data-ttu-id="d7994-163">Aktivieren und Deaktivieren der Paketwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-163">Enabling and disabling package restore</span></span>

<span data-ttu-id="d7994-164">Die Paketwiederherstellung ist standardmäßig in Visual Studio über **Tools > Optionen > NuGet-Paket-Manager** aktiviert:</span><span class="sxs-lookup"><span data-stu-id="d7994-164">Package restore is primarily enabled through **Tools > Options > NuGet Package Manager** in Visual Studio:</span></span>

![Überwachen der Wiederherstellungsverhalten mithilfe von Optionen des NuGet-Paket-Managers](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="d7994-166">**NuGet das Herunterladen fehlender Pakete erlauben:** überwacht, wie im Folgenden dargestellt, jegliche Arten der Paketwiederherstellung durch die Änderung der `packageRestore/enabled`-Einstellung in der `%AppData%\NuGet\NuGet.Config`-Datei.</span><span class="sxs-lookup"><span data-stu-id="d7994-166">**Allow NuGet to download missing packages**: controls all forms of package restore by changing the `packageRestore/enabled` setting in the `%AppData%\NuGet\NuGet.Config` file as shown below.</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-Integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```
    <br/>
    > [!Note]
    >  <span data-ttu-id="d7994-167">Die `packageRestore/enabled`-Einstellung kann global außer Kraft gesetzt werden, indem eine Umgebungsvariable namens **EnableNuGetPackageRestore** mit einem Wert von TRUE oder FALSE festgelegt wird, bevor Visual Studio gestartet oder mit einem Build begonnen wird.</span><span class="sxs-lookup"><span data-stu-id="d7994-167">The `packageRestore/enabled` setting can be overridden globally by setting an environment variable called **EnableNuGetPackageRestore** with a value of TRUE or FALSE before launching Visual Studio or starting a build.</span></span>
    

- <span data-ttu-id="d7994-168">**Automatisch auf fehlende Pakete während des Builds in Visual Studio überprüfen:** überwacht die automatische Wiederherstellung für NuGet 2.7 und höher, indem die `packageRestore/automatic`-Einstellung, wie im Folgenden dargestellt, in der `%AppData%\NuGet\NuGet.Config`-Datei geändert wird.</span><span class="sxs-lookup"><span data-stu-id="d7994-168">**Automatically check for missing packages during build in Visual Studio**: controls automatic restore for NuGet 2.7 and later by changing the `packageRestore/automatic` setting in the `%AppData%\NuGet\NuGet.Config` file as shown below.</span></span>
            
    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="d7994-169">Weitere Informationen finden Sie unter [NuGet config file – packageRestore section (NuGet-Konfigurationsdatei: Abschnitt „packageRestore“)](../Schema/nuget-config-file.md#packagerestore-section).</span><span class="sxs-lookup"><span data-stu-id="d7994-169">For reference, see the [NuGet config file - packageRestore section](../Schema/nuget-config-file.md#packagerestore-section).</span></span>

<span data-ttu-id="d7994-170">In einigen Fällen kann es dazu kommen, dass ein Entwickler oder ein Unternehmen standardmäßig für alle Benutzer Pakete auf einem Computer aktivieren oder deaktivieren möchte.</span><span class="sxs-lookup"><span data-stu-id="d7994-170">In some cases, a developer or company might want to enable or disable package restore on a machine by default for all users.</span></span> <span data-ttu-id="d7994-171">Diese Einstellung kann vorgenommen werden, indem Sie über der globalen NuGet-Konfigurationsdatei in `%ProgramData%\NuGet\Config[\{IDE}[\{Version}[\{SKU}]]]` dieselbe Einstellung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="d7994-171">This can be done by adding the same settings above to the global NuGet configuration file located in `%ProgramData%\NuGet\Config[\{IDE}[\{Version}[\{SKU}]]]`.</span></span> <span data-ttu-id="d7994-172">Einzelne Benutzer können dann nach Bedarf die Wiederherstellung auf Projektebene aktivieren.</span><span class="sxs-lookup"><span data-stu-id="d7994-172">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="d7994-173">Weitere Informationen zur Vorgehensweise von NuGet bei der Priorisierung von mehreren Konfigurationsdateien finden Sie unter [Configuring NuGet Behavior (Konfigurieren des NuGet-Verhaltens)](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span><span class="sxs-lookup"><span data-stu-id="d7994-173">See [Configuring NuGet Behavior](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) for exact details on how NuGet prioritizes multiple config files.</span></span>

## <a name="constraining-package-versions-with-restore"></a><span data-ttu-id="d7994-174">Einschränken der Paketversionen mit der Wiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-174">Constraining package versions with restore</span></span>

<span data-ttu-id="d7994-175">Wenn NuGet Pakete über eine beliebige Methode wiederherstellt, berücksichtigt es jegliche in `packages.config`, `project.json` oder der Projektdatei angegebenen Einschränkungen:</span><span class="sxs-lookup"><span data-stu-id="d7994-175">When NuGet restores packages through any method, it will honor any constraints specified in `packages.config`, `project.json`, or the project file:</span></span>

- <span data-ttu-id="d7994-176">`packages.config`: Gibt einen Versionsbereich in der `allowedVersion`-Eigenschaft der Abhängigkeit an.</span><span class="sxs-lookup"><span data-stu-id="d7994-176">`packages.config`: Specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="d7994-177">Informationen dazu finden Sie unter [Reinstalling and Updating Packages (Erneutes Installieren und Aktualisieren von Paketen)](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span><span class="sxs-lookup"><span data-stu-id="d7994-177">See [Reinstalling and Updating Packages](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span></span> <span data-ttu-id="d7994-178">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="d7994-178">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="d7994-179">`project.json`: Gibt einen Versionsbereich zusammen mit der Versionsnummer der Abhängigkeit an.</span><span class="sxs-lookup"><span data-stu-id="d7994-179">`project.json`: Specify a version range directly with the dependency's version number.</span></span> <span data-ttu-id="d7994-180">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="d7994-180">For example:</span></span>

    ```json
    "Newtonsoft.json": "[6, 7)"
    ```

- <span data-ttu-id="d7994-181">Paketverweise in Projektdateien: Gibt einen Versionsbereich zusammen mit der Versionsnummer der Abhängigkeit an.</span><span class="sxs-lookup"><span data-stu-id="d7994-181">Package references in project files: Specify a version range directly with the dependency's version number.</span></span> <span data-ttu-id="d7994-182">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="d7994-182">For example:</span></span>
 
    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />  
    ```

<span data-ttu-id="d7994-183">Verwenden Sie in jedem Fall die unter [Paketversionsverwaltung](../reference/package-versioning.md) beschriebene Notation.</span><span class="sxs-lookup"><span data-stu-id="d7994-183">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="command-line-restore"></a><span data-ttu-id="d7994-184">Befehlszeilenwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="d7994-184">Command-line restore</span></span>

<span data-ttu-id="d7994-185">Verwenden Sie für NuGet 2.7 und höher den Befehl [Wiederherstellen](../tools/cli-ref-restore.md), um sämtliche Pakete in einer Projektmappe wiederherzustellen. Dabei macht es keinen Unterschied, ob `packages.config`, `project.json` oder Paketverweise in Projektdateien verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d7994-185">For NuGet 2.7 and above, use the [Restore](../tools/cli-ref-restore.md) command to restore all packages in a solution (whether it uses `packages.config`, `project.json`, or package references in project files).</span></span> <span data-ttu-id="d7994-186">Für einen vorhandenen Projektordner wie `c:\proj\app` stellen die folgenden, häufig verwendeten Variationen die Pakete wieder her:</span><span class="sxs-lookup"><span data-stu-id="d7994-186">For a given project folder such as `c:\proj\app`, the common variations below each restore the packages:</span></span>

```
c:\proj\app\> nuget restore
c:\proj\app\> nuget.exe restore app.sln
c:\proj\> nuget restore app
```

<span data-ttu-id="d7994-187">Für NuGet 4.0 und höher sowie MSBuild 15.1 und höher können Sie außerdem `MSBuild /t:restore` verwenden, wie unter [NuGet pack and restore as MSBuild targets (Packen und Wiederherstellen von NuGet als MSBuild-Ziele)](../schema/msbuild-targets.md) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="d7994-187">For NuGet 4.0+ and MSBuild 15.1+, you can also use `MSBuild /t:restore` as described on [NuGet pack and restore as MSBuild targets](../schema/msbuild-targets.md).</span></span>

## <a name="build-time-restore-in-visual-studio"></a><span data-ttu-id="d7994-188">Wiederherstellung zur Buildzeit in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d7994-188">Build-time restore in Visual Studio</span></span>

<span data-ttu-id="d7994-189">Visual Studio stellt fehlende Pakete standardmäßig zu Beginn des Buildvorgangs automatisch wieder her.</span><span class="sxs-lookup"><span data-stu-id="d7994-189">Visual Studio automatically restores missing packages by default at the beginning of a build.</span></span> <span data-ttu-id="d7994-190">Dieses Verhalten kann über **Tools > Optionen > NuGet-Paket-Manager > Allgemein > Automatisch auf fehlende Pakete während des Builds in Visual Studio überprüfen** deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="d7994-190">This behavior can be changed by clearing **Tools > Options > NuGet Package Manager > General > Automatically check for missing packages during build in Visual Studio**.</span></span>

<span data-ttu-id="d7994-191">Wenn die automatische Wiederherstellung aktiviert ist, funktioniert diese wie folgt:</span><span class="sxs-lookup"><span data-stu-id="d7994-191">When enabled, automatic restore works as follows:</span></span>

1. <span data-ttu-id="d7994-192">Zu Beginn eines Builds erteilt Visual Studio NuGet die Anweisung, Pakete wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="d7994-192">When a build begins, Visual Studio instructs NuGet to restore packages.</span></span>
1. <span data-ttu-id="d7994-193">NuGet sucht rekursiv nach allen `packages.config`-Dateien und nach `project.json` in der Projektmappe oder in der Projektdatei.</span><span class="sxs-lookup"><span data-stu-id="d7994-193">NuGet recursively looks for all `packages.config` files in the solution, looks for `project.json`, or looks in the project file.</span></span>
1. <span data-ttu-id="d7994-194">NuGet überprüft für alle in den Verweisdateien aufgeführten Pakete, ob es bereits in der Projektmappe enthalten ist. Abhängig davon, ob das Projekt `packages.config`, `project.json` oder Paketverweise in den Projektdateien verwendet, werden diese Überprüfungen im `packages`-Ordner, in der `project.lock.json`-Datei oder in `project.assets.json` durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="d7994-194">For each packages listed in the reference files, NuGet checks if it already exists in the solution (the `packages` folder, `project.lock.json`, or `project.assets.json` depending on whether the project is using `packages.config`, `project.json`, or package references in project files).</span></span>
1. <span data-ttu-id="d7994-195">Wenn das Paket nicht gefunden wird, versucht NuGet zunächst das Paket aus dem Cache abzurufen (Informationen dazu finden Sie unter [Managing the NuGet cache (Verwalten des NuGet-Caches)](../consume-packages/managing-the-nuget-cache.md).</span><span class="sxs-lookup"><span data-stu-id="d7994-195">If the package is not found, NuGet attempts to retrieve the package from its cache first (see [Managing the NuGet cache](../consume-packages/managing-the-nuget-cache.md).</span></span> <span data-ttu-id="d7994-196">Wenn sich das Paket nicht im Cache befindet, versucht NuGet es aus den unter **Tools > Optionen > NuGet-Paket-Manager > Paketquellen** aufgeführten aktivierten Quellen herunterzuladen, damit die Quellen angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="d7994-196">If the package is not in the cache, NuGet attempts to download the package from the enabled sources as listed in **Tools > Options > NuGet Package Manager > Package Sources**, in the order that the sources appear.</span></span> <span data-ttu-id="d7994-197">In diesem Fall verweist NuGet erst auf einen Fehler, nachdem alle Quellen überprüft worden sind. Der Fehler wird dann nur für die zuletzt überprüfte Quelle in der Liste angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d7994-197">In this case, NuGet does not indicate a failure to find the package until all the sources have been checked, at which time it reports the failure only for the last source in the list.</span></span> <span data-ttu-id="d7994-198">Im Umkehrschluss deutet ein solcher Fehler also darauf hin, dass das Paket auch in keiner der anderen Quellen vorhanden ist, auch wenn für die einzelnen Quellen kein Fehler angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="d7994-198">By implication such an error also means that the package wasn't present on any of the other sources either, even though errors were not shown for those sources individually.</span></span>
1. <span data-ttu-id="d7994-199">Wenn der Download erfolgreich ausgeführt wurde, speichert NuGet das Paket zwischen und installiert es in der Projektmappe (erneut im `packages`-Ordner, in der `project.lock.json`-Datei oder in `project.assets.json`). Andernfalls wird für NuGet ein Fehler ausgelöst und der Build schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="d7994-199">If the download is successful, NuGet caches the package and installs it into the solution (again, into either the `packages` folder, `project.lock.json`, or `project.assets.json`); otherwise NuGet fails and the build fails.</span></span>

<span data-ttu-id="d7994-200">Bei diesem Vorgang wird Ihnen ein Dialogfeld mit dem Fortschritt angezeigt, über das Sie auch die Möglichkeit haben, die Paketwiederherstellung abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="d7994-200">During this process, you see a progress dialog with the option to cancel package restore.</span></span>

## <a name="package-restore-with-team-foundation-build"></a><span data-ttu-id="d7994-201">Paketwiederherstellung mit Team Foundation Build</span><span class="sxs-lookup"><span data-stu-id="d7994-201">Package Restore with Team Foundation Build</span></span>

<span data-ttu-id="d7994-202">Die Paketwiederherstellung wird häufig beim Erstellen von Projekten auf Buildservern verwendet. So zum Beispiel auch bei Team Foundation Server (TFS) und Visual Studio Team Services oder anderen Buildsystemen, die in diesem Artikel nicht behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="d7994-202">Package restore is commonly used when building projects on build servers, as with Team Foundation Server (TFS) and Visual Studio Team Services (as well as other build systems, which are not covered here).</span></span>

### <a name="visual-studio-team-services"></a><span data-ttu-id="d7994-203">Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="d7994-203">Visual Studio Team Services</span></span>

<span data-ttu-id="d7994-204">Fügen Sie bei der Erstellung einer Builddefinition auf Team Services dieser einfach die Aufgabe „NuGet-Pakete wiederherstellen“ hinzu, bevor Sie eine Buildaufgabe ausführen.</span><span class="sxs-lookup"><span data-stu-id="d7994-204">When creating a build definition on Team Services, simply include the Restore NuGet Packages task in the definition before any build task.</span></span> <span data-ttu-id="d7994-205">Diese Aufgabe ist standardmäßig in einer Reihe von Buildvorlagen enthalten.</span><span class="sxs-lookup"><span data-stu-id="d7994-205">This task is included by default in a number of build templates.</span></span>

![Die Aufgabe „NuGet-Pakete wiederherstellen“ in einer Visual Studio Team Service-Builddefinition](media/Restore-02-VSTSBuild.png)

### <a name="team-foundation-server"></a><span data-ttu-id="d7994-207">Team Foundation Server</span><span class="sxs-lookup"><span data-stu-id="d7994-207">Team Foundation Server</span></span>

<span data-ttu-id="d7994-208">In TFS 2013 und höher werden Pakete standardmäßig automatisch beim Build wiederhergestellt, wenn Sie eine Team Build-Vorlage für Team Foundation Server 2013 oder höher verwenden.</span><span class="sxs-lookup"><span data-stu-id="d7994-208">With TFS 2013 and later, packages are automatically restored by default during build, provided that you're using a Team Build Template for Team Foundation Server 2013 or later.</span></span>

<span data-ttu-id="d7994-209">Wenn Sie die Vorgängerversion einer Buildvorlage verwenden (z.B. in einem Projekt, dass aus früheren TFS-Versionen importiert wurde), müssen Sie diese in TFS 2013 migrieren.</span><span class="sxs-lookup"><span data-stu-id="d7994-209">If you're using a previous version of build templates (such as in a project that's been migrated from earlier versions of TFS), you'll need to also migrate those build templates to TFS 2013.</span></span> <span data-ttu-id="d7994-210">Das bedeutet grundsätzlich, dass Sie die benutzerdefinierten Bestandteile der Buildvorlagen neu erstellen, indem Sie eine für die Quellcodeverwaltung geeignete Vorlage verwenden (TFVC oder Git).</span><span class="sxs-lookup"><span data-stu-id="d7994-210">This essentially means recreating the custom parts of the Build Templates using the appropriate template for your source control (TFVC or Git).</span></span>

<span data-ttu-id="d7994-211">Bei früheren TFS-Versionen können Sie problemlos einen Buildschritt hinzufügen, um die [Befehlszeilenwiederherstellung](#command-line-restore) wie zuvor beschrieben auszulösen.</span><span class="sxs-lookup"><span data-stu-id="d7994-211">For earlier version of TFS, you can simply include a build step to invoke [command-line restore](#command-line-restore) as described earlier.</span></span>

<span data-ttu-id="d7994-212">Weitere Informationen finden Sie unter [Walkthrough of Package Restore with Team Foundation Build (Exemplarische Vorgehensweise für die Paketwiederherstellung mit Team Foundation Build)](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="d7994-212">For more details see then [Walkthrough of Package Restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>    
